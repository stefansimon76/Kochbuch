<div class="card-body">
    <form method="POST" action="/new-rezept" enctype="multipart/form-data" onsubmit="return validateRezeptForm()">
        <h4 class="card-title">Rezept anlegen</h4>

        <div id="infos" class="card alert-info p-1 mb-2">
            <p>Geben Sie bitte eine Bezeichnung für das Rezept ein. z.B. <b>Helloween-Finger</b></p>
            <p>Beschreiben Sie das Rezept. Z.B. <b>Gruselige aber leckere Kekse in Fingerform</b></p>
            <p>Geben Sie die Zutaten ein, entweder in der Form Menge|Einheit|Zutat oder als Freitext. Z.B. <b>1|__|Ei</b> oder <b>|__|__|etwas rote Lebensmittelfarbe</b></p>
            <p>Beschreiben Sie die Zubereitung z.B. <b>Kommt noch</b></p>
            <p>Backzeit und Temperatur <b>Kommt noch</b></p>
        </div>


        {{#errors}}
            <div id="server_errors" class="card alert-danger p-1 mb-2">
                <p>{{.}}</p>
            </div>
        {{/errors}}
        <div id="client_errors" class="card alert-danger p-1 mb-2" hidden="hidden">
        </div>

        <div class="form-group">
            <label for="title" hidden="hidden"></label>
            <input class="form-control" id="title" type="text" name="title"
                   placeholder="Titel"
                   value="{{title}}" minlength="" maxlength="100">
        </div>
        <div class="form-group">
            <label for="description" hidden="hidden"></label>
            <textarea id="description" class="form-control" rows="3"
                      placeholder="Beschreibung" maxlength="2000">{{description}}</textarea>
        </div>

        <div class="border rounded mb-1 bg-light" hidden="hidden">
            <div class="row" >
                <div class="col-6 col-md-2 pr-0">
                    <label for="zutat1menge" hidden="hidden"></label>
                    <input class="form-control" id="zutat1menge" type="text" name="zutat1menge"
                           placeholder="Menge"
                           value="{{menge}}" minlength="" maxlength="20">
                </div>

                <div class="col-6 col-md-2" id="col_zutat1einheit">
                    <label for="zutat1einheit" hidden="hidden"></label>
                    <input class="form-control" id="zutat1einheit" type="text" name="zutat1einheit"
                           placeholder="Einheit"
                           value="{{name}}" minlength="" maxlength="100">
                </div>

                <div class="col-9 col-md-6 pr-0" id="col_zutat1name">
                    <label for="zutat1name" hidden="hidden"></label>
                    <input class="form-control" id="zutat1name" type="text" name="zutat1name"
                           placeholder="Zutatenname"
                           value="{{name}}" minlength="" maxlength="100" required>
                </div>

                <div class="col-3 col-md-2 text-nowrap text-right"><div class="btn alert-danger" onclick="delZutat();">X</div></div>
            </div>
        </div>

        <div id="lstZutaten"></div>

        <div class="row mt-2">
            <div class="col">
                <button class="btn btn-secondary" onclick="addZutat();">+1 Zutat</button>
            </div>
        </div>

        <div id="lstTasks" class="mt-2">
            <div id="task1" class="border rounded mb-1" hidden="hidden">
                <div class="row">
                    <div class="col-9 col-md-10 pr-0">
                        <label for="_task1" hidden="hidden"></label>
                        <input class="form-control" id="_task1" type="text" name="_task1"
                               placeholder="Vorbereitung, Zubereitung, Anweisungen zum Backen bzw. Kochen"
                               value="{{name}}" minlength="" maxlength="2000">
                    </div>
                    <div class="col-3 col-md-2 text-nowrap text-right"><div class="btn alert-danger" onclick="delZutat();">X</div></div>
                </div>
                <label for="descTask1" hidden="hidden"></label>
                <textarea id="descTask1" class="form-control" rows="3"
                          placeholder="Beschreibung" maxlength="2000"></textarea>
            </div>
        </div>

        <div class="row mt-2">
            <div class="col">
                <button class="btn btn-secondary" onclick="addTask();">+1 Task</button>
            </div>
        </div>

<!--        https://startbootstrap.com/snippets/thumbnail-gallery/-->
<!--        https://plugins.krajee.com/file-input-->
        <label for="input-res-1">Bilder hinzufügen</label>
        <div class="file-loading">
            <input id="input-res-1" name="input-res-1[]" type="file" multiple data-max-file-count="5">
        </div>

<!--        https://github.com/promosis/file-upload-with-preview-->

        <div class="row mt-2">
            <div class="col text-right">
                <button class="btn btn-primary" type="submit">Speichern</button>
            </div>
        </div>

        <a class="card-link" href="/">abbrechen</a>

    </form>
</div>

<script src="/helper/RezeptController.js"></script>
<script type="text/javascript">
    addZutat();
    addZutat();
</script>

<script>
    $(document).ready(function() {
        $("#input-res-1").fileinput({
            theme: 'fas',
            maxFileCount: 5, // maximal 5 Bilder erlauben
            overwriteInitial: true, // Initialdaten überschreiben
            showClose: false, // X rechts oben ausblenden
            maxFileSize: 5000, // maximale Dateigröße
            showUpload: false, // globalen Upload-Button ausblenden
            showRemove: false, // globalen Remove-Button ausblenden
            uploadUrl: "/site/file-delete", // muss gesetzt sein, damit remove-Button bei jedem Bild sichtbar ist
            fadeDelay: 400, // Animation verkürzen (default 800)

            allowedFileTypes: ["image"],
            allowedFileExtensions: ["jpg", "png"],

            // nur den Remove-Button bei jedem Bild anzeigen
            layoutTemplates: {
                actions: '<div class="file-actions">\n' +
                '    <div class="file-footer-buttons">\n' +
                '        {delete}' +
                '    </div>\n' +
                '</div>\n' +
                '{drag}\n' +
                '<div class="clearfix"></div>'

            },

        });
    });
</script>

